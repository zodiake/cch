<!doctype html>
<html xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport"
          content="width=device-width,  initial-scale=1.0, user-scalable=0, minimum-scale=1.0,  maximum-scale=1.0"/>
    <title>会员管理详细页</title>
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="/css/bootstrap-override.css"/>
    <link rel="stylesheet" type="text/css" href="/css/base.css"/>
    <link rel="stylesheet" type="text/css" href="/css/template.css"/>
    <script type="text/javascript" src="/js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/js/template.js"></script>
    <script type="text/javascript" src="/js/jsRender.js"></script>
    <script id="use-tmpl" type="text/x-jsrender">
        <form class="form-horizontal">
            <div class="form-group">
                <label class="col-md-3 control-label">会员卡：</label>
                <div class="col-md-3 padd5 text-center">{{:name}}</div>
            </div>
            <div class="form-group">
                <label class="col-md-3 control-label">注册日期：</label>
                <div class="col-md-3 padd5 text-center">{{:createdTime}}</div>
            </div>
            <div class="form-group">
                <label class="col-md-3 control-label">消费金额：</label>
                <div class="col-md-3 padd5 text-center">{{:sum}}</div>
            </div>
            <div class="form-group">
                <label class="col-md-3 control-label">消费次数：</label>
                <div class="col-md-3 padd5 text-center">{{:count}}</div>
            </div>
            <div class="form-group">
                <label class="col-md-3 control-label">总积分：</label>
                <div class="col-md-3 padd5 text-center">{{:totalScore}}</div>
            </div>
            <div class="form-group">
                <label class="col-md-3 control-label">可用积分：</label>
                <div class="col-md-3 padd5 text-center">
                  <span class="item-amount ">
                    <a class="minus">
                        <i class="icon icon-miuns"></i>
                    </a>
                    <input type="text" value="1234"/>
                    <a class="plus">
                        <i class="icon icon-plus"></i>
                    </a>
                  </span>
                </div>
            </div>
        </form>
    </script>
    <script>
        $(function () {
            var consumeTmpl = {};

            var array = [{
                tab: '#use',
                tmplName: '#use-tmpl',
                tabDetail: '#t2',
                cacheName: 'use',
                suffix: '/consume'
            }];

            function init(obj) {
                $(obj.tab).click(function () {
                	var self=$(this);
                    var id = self.attr('data-id');
                    $.ajax({
                        url: '/admin/members/' + id + obj.suffix,
                        success: function (data) {
                            if (consumeTmpl[obj.cacheName] == null)
                                consumeTmpl[obj.cacheName] = $.templates(obj.tmplName);
                            var html = consumeTmpl[obj.cacheName].render(data);
                            $(obj.tabDetail).html(html);
                        }
                    });
                });
            }

            array.forEach(function (e) {
                init(e);
            });
        });
    </script>
</head>

<body>
<div class="header clearfix">
    <div th:replace="admin/layout/header::header"></div>
</div>
<div class="mainwrapper clearfix">
    <div th:replace="admin/layout/menu::menu"></div>

    <div class="mainpanel">
        <div class="mem-manage-detail">
            <ul class="nav nav-tabs">
                <li class="base active">
                    <a data-toggle="tab" href="#t1">基本信息
                    </a>
                </li>
                <li class="use">
                    <a data-toggle="tab" id="use" href="#t2" th:attr="data-id=${member.id}">使用情况
                    </a>
                </li>
                <li class="default">
                    <a data-toggle="tab" id="consumeFlow" href="#t3" th:attr="data-id=${member.id}">消费记录
                    </a>
                </li>
                <li class="default">
                    <a data-toggle="tab" id="scoreFlow" href="#t4" th:attr="data-id=${member.id}">积分记录
                    </a>
                </li>
                <li class="default">
                    <a data-toggle="tab" id="parkingFlow" href="#t5" th:attr="data-id=${member.id}">停车记录
                    </a>
                </li>
                <li class="default">
                    <a data-toggle="tab" id="couponFlow" href="#t6" th:attr="data-id=${member.id}">卡券记录
                    </a>
                </li>
            </ul>
            <div class="tab-content">
                <div id="t1" class="tab-pane active">
                    <form class="form-horizontal">
                        <div class="clearfix mr50">
                            <input id="validate" type="button" class="pull-right btn btn-danger" data-toggle="modal"
                                   data-target=".modal" value="加入黑名单" th:attr="member=${member.id}"/>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label">姓名：</label>
                            <div class="col-md-3 padd5 text-center">Jessica Foster</div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label">手机号：</label>
                            <div class="col-md-3 padd5 text-center">13454672334</div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label">出生年月：</label>
                            <div class="col-md-3 padd5 text-center">1992/01/01</div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label">详细地址：</label>
                            <div class="col-md-3 padd5 text-center">上海市黄浦区建国西路</div>
                        </div>
                    </form>
                </div>
                <div id="t2" class="tab-pane" >
                </div>
                <div id="t3" class="tab-pane">
                    <table class="table table-striped bg-white">
                        <thead>
                        <tr>
                            <th>消费时间</th>
                            <th>消费店铺</th>
                            <th>消费金额</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>2015年10月10号</td>
                            <td>长宁店</td>
                            <td>2000</td>
                        </tr>
                        <tr>
                            <td>2015年10月10号</td>
                            <td>长宁店</td>
                            <td>2000</td>
                        </tr>
                        <tr>
                            <td>2015年10月10号</td>
                            <td>长宁店</td>
                            <td>2000</td>
                        </tr>
                        <tr>
                            <td>2015年10月10号</td>
                            <td>长宁店</td>
                            <td>2000</td>
                        </tr>
                        </tbody>
                    </table>
                    <div class="pagination-wrap">
                        <ul class="pagination">
                            <li>
                                <a href="#" aria-label="Previous">
                                    <span aria-hidden="true">«</span>
                                </a>
                            </li>
                            <li class="active"><a href="#">1</a></li>
                            <li><a href="#">2</a></li>
                            <li><a href="#">3</a></li>
                            <li><a href="#">4</a></li>
                            <li><a href="#">5</a></li>
                            <li>
                                <a href="#" aria-label="Next">
                                    <span aria-hidden="true">»</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div id="t4" class="tab-pane">
                    <table class="table table-striped bg-white">
                        <thead>
                        <tr>
                            <th>变更时间</th>
                            <th>积分变动</th>
                            <th>描述</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>2015年10月10号</td>
                            <td>-10</td>
                            <td>描述描述描述描述描述描述描述</td>
                        </tr>
                        <tr>
                            <td>2015年10月10号</td>
                            <td>-10</td>
                            <td>描述描述描述描述描述描述描述</td>
                        </tr>
                        <tr>
                            <td>2015年10月10号</td>
                            <td>-10</td>
                            <td>描述描述描述描述描述描述描述</td>
                        </tr>
                        </tbody>
                    </table>
                    <div class="pagination-wrap">
                        <ul class="pagination">
                            <li>
                                <a href="#" aria-label="Previous">
                                    <span aria-hidden="true">«</span>
                                </a>
                            </li>
                            <li class="active"><a href="#">1</a></li>
                            <li><a href="#">2</a></li>
                            <li><a href="#">3</a></li>
                            <li><a href="#">4</a></li>
                            <li><a href="#">5</a></li>
                            <li>
                                <a href="#" aria-label="Next">
                                    <span aria-hidden="true">»</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div id="t5" class="tab-pane">
                    <table class="table table-striped bg-white">
                        <thead>
                        <tr>
                            <th>进场时间</th>
                            <th>出场时间</th>
                            <th>支付车牌</th>
                            <th>金额</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>2015年10月10号</td>
                            <td>2015年10月10号</td>
                            <td>沪A25112</td>
                            <td>100</td>
                        </tr>
                        <tr>
                            <td>2015年10月10号</td>
                            <td>2015年10月10号</td>
                            <td>沪A25112</td>
                            <td>100</td>
                        </tr>
                        <tr>
                            <td>2015年10月10号</td>
                            <td>2015年10月10号</td>
                            <td>沪A25112</td>
                            <td>100</td>
                        </tr>
                        <tr>
                            <td>2015年10月10号</td>
                            <td>2015年10月10号</td>
                            <td>沪A25112</td>
                            <td>100</td>
                        </tr>
                        </tbody>
                    </table>
                    <div class="pagination-wrap">
                        <ul class="pagination">
                            <li>
                                <a href="#" aria-label="Previous">
                                    <span aria-hidden="true">«</span>
                                </a>
                            </li>
                            <li class="active"><a href="#">1</a></li>
                            <li><a href="#">2</a></li>
                            <li><a href="#">3</a></li>
                            <li><a href="#">4</a></li>
                            <li><a href="#">5</a></li>
                            <li>
                                <a href="#" aria-label="Next">
                                    <span aria-hidden="true">»</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div id="t6" class="tab-pane">
                    <table class="table table-striped bg-white">
                        <thead>
                        <tr>
                            <th>获得时间</th>
                            <th>使用时间</th>
                            <th>卡券名称</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>2015年10月10号</td>
                            <td>2015年10月10号</td>
                            <td>普通卡券</td>
                        </tr>
                        <tr>
                            <td>2015年10月10号</td>
                            <td>2015年10月10号</td>
                            <td>普通卡券</td>
                        </tr>
                        <tr>
                            <td>2015年10月10号</td>
                            <td>2015年10月10号</td>
                            <td>普通卡券</td>
                        </tr>
                        <tr>
                            <td>2015年10月10号</td>
                            <td>2015年10月10号</td>
                            <td>普通卡券</td>
                        </tr>
                        <tr>
                            <td>2015年10月10号</td>
                            <td>2015年10月10号</td>
                            <td>普通卡券</td>
                        </tr>
                        <tr>
                            <td>2015年10月10号</td>
                            <td>2015年10月10号</td>
                            <td>普通卡券</td>
                        </tr>
                        <tr>
                            <td>2015年10月10号</td>
                            <td>2015年10月10号</td>
                            <td>普通卡券</td>
                        </tr>
                        <tr>
                            <td>2015年10月10号</td>
                            <td>2015年10月10号</td>
                            <td>普通卡券</td>
                        </tr>
                        </tbody>
                    </table>
                    <div class="pagination-wrap">
                        <ul class="pagination">
                            <li>
                                <a href="#" aria-label="Previous">
                                    <span aria-hidden="true">«</span>
                                </a>
                            </li>
                            <li class="active"><a href="#">1</a></li>
                            <li><a href="#">2</a></li>
                            <li><a href="#">3</a></li>
                            <li><a href="#">4</a></li>
                            <li><a href="#">5</a></li>
                            <li>
                                <a href="#" aria-label="Next">
                                    <span aria-hidden="true">»</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!--modal start-->

            <div class="modal fade bs-example-modal-sm modal" tabindex="-1" role="dialog"
                 aria-labelledby="mySmallModalLabel">
                <div class="modal-dialog modal-sm">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">×</span></button>
                        </div>
                        <div class="modal-body text-center">
                            <div class="alert alert-danger" role="alert">
                                警告!<br>
                                确认是否将该客户移至黑名单？</br>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                            <button type="button" class="btn btn-danger confirm" data-toggle="modal"
                                    data-target=".modal-two" data-dismiss="modal">确认
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <!--modal end-->

        </div>
    </div>
</div>
<div class="success-modal">
    <div class="show-msg">
        <div class="alert alert-success" role="alert">
            设置成功
        </div>
        <div class="success-bg">
            <img src="img/icon-success.jpg"/>
        </div>
    </div>
</div>
<div class="fixed"></div>
<script type="text/javascript">
    $(function () {
        // $('.modal-one').on('hide.bs.modal', function () {
        //   alert(111);})
        $('.modal-footer .confirm').click(function () {
            $('.success-modal,.fixed').show().delay(2000).fadeOut(500);
        })
    });
</script>
</body>
</html>